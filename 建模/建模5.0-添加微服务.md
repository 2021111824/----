# 面向公平性的云边微服务系统部署方法

### A. 系统建模

本文研究**云-边协同环境**下的**公平性优化微服务部署问题**。系统由一组**边缘服务器**（记作$S_{edge} = \{ s_1, s_2, \dots, s_j \}$）和**云服务器**（记作$S_{cloud}$）组成，用户请求的服务将在这些服务器上处理。边缘服务器由系统完全控制，而云服务器按**按需计费**模式提供服务资源。



#### **定义 1（用户模型）**

设 $U$ 为用户集合，每个用户 $u_i \in U$ 具有以下属性：
$$
u_i = \langle  Q_i, W_i, D_i, p_i \rangle
$$
其中：

* **$Q_i$**：用户的**优先级**（取值为 $1,2,3, \cdots$）数值越大表示用户的重要程度越高
* **$W_i$**：用户的**权重**，与 $Q_i$ 成正比
* **$D_i$**：用户**请求服务的数据量**（比特）
* $p_i$ ：该用户请求需要的**计算能力**（n 个计算单位）

用户请求的服务需要被分配到某台**边缘服务器**或**云服务器**进行处理。



#### 定义2（服务器模型）

##### **边缘服务器**

每个**边缘服务器** $s_j^{edge} \in S_{edge}$ 具有以下属性：
$$
s_{j}^{edge} = < R_j^{server}, c_{fixed_j}^e>
$$
其中：

* $R_j^{server} = <r_j^{CPU}, r_j^{RAM}, \cdots >$ ：表示边缘服务器 $s_j$ 提供的可用计算资源（包括$CPU 、RAM$ 等）；
* $c_{fixed_j}^e$ ：表示租赁服务器 $s_j$ 的固定成本。

系统中**用户终端**与**边缘服务器**之间的**网络带宽**和**通信延迟**分别表示为：
$$
B^e = \{ b_{i,j}^e | \forall u_i \in U, \forall s_j \in S_{edge}  \}
$$

$$
D^e = \{ t_{d_{i,j}^e} | \forall u_i \in U, \forall s_j \in S_{edge}  \}
$$

##### 云服务器

**云服务器** $S_{cloud}$ 资源丰富，在云服务器上使用每个计算单位的价格 $p_{net}$。

系统中**用户终端**与**云服务器**之间的**网络带宽**和**通信延迟**分别表示为：
$$
B^c = \{ b_{i,j}^c | \forall u_i \in U, \forall s_j \in S_{cloud}  \}
$$

$$
D^c = \{ t_{d_{i,j}^c} | \forall u_i \in U, \forall s_j \in S_{cloud}  \}
$$

由于云服务器距离用户较远，其通信延迟一般大于边缘服务器，即 $d_{i,j}^c > d_{i,j}^e$。



#### 定义3（微服务模型）

设 $M$ 为微服务实例集合，每个微服务实例 $m_k \in M$ 由以下属性定义：
$$
m_k = \langle P_k^m, r_k^m \rangle
$$
其中：

* **$P_k^m$**：表示该微服务实例的计算能力（计算单位/s）；
* **$r_k^m$**：表示部署该微服务实例的资源需求（如 CPU、RAM等）。

在本研究的场景中，所有服务实例均提供**同一种服务**。



#### 定义4 （微服务部署方案）

微服务部署方案 **Y** 描述了**微服务实例在服务器上的部署状态**：
$$
Y = \{ y_{kj} | \forall m_k \in M,s_j \in S,  y_{kj} \in \{0,1\} \}
$$
其中，$y_{kj}$ 代表微服务实例 $m_k$ 是否部署在服务器 $s_j$：
$$
y_{kj} = \begin{cases} 1, & \text{若微服务实例 } m_k \text{ 部署在服务器 } s_j \\ 0, & \text{否则} \end{cases}
$$





### B. 问题公式化

#### 1）响应时间

设 $t_{ij}$ 为用户 $u_i$ 获取服务的响应时间，包括三部分，数据传输延迟、处理延迟及传播延迟：
$$
t_{i,j} = t_{send_{ij}} + t_{p_{ij}} + t_{d_{i,j}}
$$

- **传输延迟 $t_{send_{ij}} = \frac {D_i}{b_{ij}}$**，为传输数据量与用户服务器之间的带宽比；

* **处理延迟** $t_{p_{ij}} = \frac{D_{i}}{P_{ij}}$，为用户请求需要的总计算单位与服务实例分配给用户的处理能力之比； 

* **传播延迟** $t_{d_{i,j}}$，即前面定义的用户与不同服务器之间的基础传播延迟；

#### 2）约束条件

##### 1. 

#### 3）问题定义

