以下是对论文中 **IV. SYSTEM MODEL AND PROBLEM FORMULATION** 部分的完整翻译：

------

## **IV. 系统模型与问题公式化**

在本节中，我们将建立系统模型，并将问题框定为 **整数非线性规划 (INLP)** 问题。本文中使用的符号汇总见**表 II**。

### **A. 系统模型**

本文关注 **云-边协同环境** 中的微服务系统，该系统由一组**私有边缘服务器**（记为$$N = \{ n_1, n_2, \dots, n_j \}$$）和**公共云**（记为 $C$）组成。系统能够完全控制 **N** 上微服务的部署，但无法控制 **C** 上的服务实例部署。开发人员可以选择在 **C** 上运行某些服务，并根据使用量和持续时间支付资源费用。每个边缘服务器 nin_i 提供的可用资源集合记作：

$r^{n_i} = \langle r^{n_i}_1, r^{n_i}_2, \dots, r^{n_i}_m \rangle$

系统中的边缘服务器之间的带宽和延迟分别定义为：

$$B = \{ b_{i,j} | \forall n_i, n_j \in N \}, \quad D = \{ d_{i,j} | \forall n_i, n_j \in N \}$$

在云 **C** 上运行服务的每毫秒单价为 **c**，边缘服务器与云之间的带宽和延迟分别表示为：

$B^C = \{ b^C_i | \forall n_i \in N \}, \quad D^C = \{ d^C_i | \forall n_i \in N \}$

考虑到网络拓扑和各种链路间的相互依赖，带宽和延迟需要通过历史数据分析得到。

#### **定义 1（微服务）**

设 **S** 为系统中的微服务集合，每个微服务表示为：

$s_i = \langle F_i, \mu_i, r^s_i \rangle, \quad \forall s_i \in S$

其中：

* **$F_i = \{ f_{i,1}, f_{i,2}, ..., f_{i,n} \}$**：表示 **$s_i$** 的功能集合，每个功能 **$f_{i,j}$** 通过 **API** 公开，输入/输出数据大小分别记为 **$\text{data}^{\text{in}}_{i,j}$** 和 **$\text{data}^{\text{out}}_{i,j}$**。
* **$\mu_i$**：表示 **$s_i$** 的处理能力，即保持服务质量时，每个实例每单位时间可处理的最大请求数。
* **$r^s_i$**：表示 **$s_i$** 运行时所需的计算资源，如 **CPU、RAM** 等。

在边缘服务器和云上的每个功能的执行时间分别为：

$t^p_{i,j} \quad \text{（边缘服务器）}, \quad t^{p,C}_{i,j} \quad \text{（云端）}$

通常，假设云计算资源更加丰富，因此相同功能的执行时间在云端更短，即：

$t^{p,C}_{i,j} < t^p_{i,j}$

------

#### **定义 2（应用）**

设 **A** 为系统中的应用集合，每个应用 **app_i** 由一系列微服务功能组成：

$app_i = \langle f_{j,m}, f_{k,n}, ..., f_{l,p} \rangle, \quad \forall app_i \in A$

在应用中，不同功能 **$f_{j,m}$** 需要按照顺序执行，每个微服务可以具有多个不同的 API，使其可以用于多个应用。本文主要关注 **链式微服务调用**，对 **DAG 形式的应用**，在第 VI-H 节进行了详细讨论。

------

#### **定义 3（云执行方案）**

**云执行方案 RR 描述了需要在云端处理的应用功能子序列**。其定义如下：

$R = \{ r_{l,j,k} | app_l \in A, 0 \leq j \leq k \leq |app_l|, r_{l,j,k} \in \{0,1\} \}$

其中，$r_{l,j,k}$ 代表当系统处理 **$$app_l$$** 时，是否在 **云端** 执行 **$$app^j_l, app^{j+1}_l, ..., app^k_l$$** 这一序列的概率。

------

### **B. 问题公式化**

#### **1) 平均响应时间**

设 $T̄_i$ 为应用 **$app_i$** 的平均响应时间，其计算公式如下：

$$T̄_i = \sum_{m=1}^{|app_i|+1} T̄_{i,m-1,m}$$

其中，$$T̄_{i,m-1,m}$$ 表示 **$$app_i$$** 的第$$m-1$$ 个功能执行完成后到 $$m$$号功能执行开始之间的平均时间，分为以下几种情况：

* **在边缘服务器内部传输（$T̄^N_{i,m-1,m}$）**
* **云端内部传输（$T̄^C_{i,m-1,m}$）**
* **从边缘到云端传输（$T̄^{N,C}_{i,m-1,m}$）**
* **从云端到边缘传输（$T̄^{C,N}_{i,m-1,m}$）**

最终，系统的 **总平均响应时间 $T̄$** 可表示为：

$T̄ = \sum_{i=1}^{|A|} \frac{u_{j,i}}{\sum_{k=1}^{|N|} u_{k,i}} T̄_i$

------

#### **2) 约束条件**

为了优化微服务部署，系统需要满足以下约束：

1. **云端预算约束**

   * 总费用不得超过预算 **CB**：

   $\sum_{i} \sum_{j} \sum_{k} u_{k,i} \cdot prob^C_{i,j} \cdot t^{p,C}_{i,j} \cdot r^s_{s(app^j_i)} \cdot c \leq CB$

2. **边缘服务器资源约束**

   * 每个边缘服务器上的服务实例所需总资源不超过服务器提供的资源：

   $\sum_{j} x_{i,j} r^s_j \leq r^{n_i}, \quad \forall n_i \in N$

3. **微服务实例处理能力约束**

   * 所有微服务的请求量不能超过其处理能力：

   $\sum_{j} \sum_{k} u_{k,i} \cdot occur(s_i, app_j) \leq \sum_{k} x_{k,i} \mu_i, \quad \forall s_i \in S$

4. **云执行方案有效性约束**

   $prob^C_{i,m} \leq 1$

------

### **3) 问题定义**

在由 **私有边缘集群 NN 和公共云 CC** 组成的微服务系统中，目标是在 **满足云端预算约束** 的前提下 **优化边缘部署方案 XX 和云执行方案 RR**，以最小化系统的 **平均响应时间 TˉT̄**：

$\min_{X,R} T̄, \quad s.t. \quad \text{（上述约束）}$